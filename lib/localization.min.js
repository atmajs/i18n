!function(r,n){"use strict";var e,t;"undefined"==typeof exports||r!==exports&&null!=r||(e=t=global),null==e&&(e="undefined"==typeof window?global:window),null==t&&(t=r||e),n(e,t)}(this,function(r,n){"use strict";function e(r,n,e){var t=n.exec(r);return t&&t[e]?t[e]:null}function t(){return t=h(w()),t.apply(null,arguments)}function a(){return console.error('<localizer> In node env. please call $L.fromReq(req)("someKey")'),h(v[0])}function o(){return s.ajax(u()).done(function(r){for(var n in r.ajax)m[n]=r.ajax[n]})}function u(){if(p){var r=[];return v.forEach(function(n,e){r[e]=d.replace("%%",n)}),r}return[d.replace("%%",w())]}var l=r.atma||r;null==l.mask&&(l=require("atma-libs/exports"));var i=l.mask,s=l.include,c=isBrowser?window.Formatter||i&&i.$utils.format:require("atma-formatter");if(null==c)throw Error("atma-formatter is not preloaded.");var f=Array.prototype.slice,p="undefined"==typeof document,v=["en"],d="/localization/%%.json",m={},g=s.route.params;g&&(g.path&&(d=g.path),g.support&&(v=g.support.split(",")));var w,x;!function(){function n(r){return-1!==v.indexOf(r)}function t(r){return e(r,/language=(\w+)/,1)}w=function(){var a=t(r.location.search);return null==a&&(a=e(r.navigator.language,/^(\w+)/,1)),a=a.toLowerCase(),n(a)?a:v[0]},x=function(r){var e,a,o=r.url.indexOf("?");if(-1!==o){var u=r.url.substring(r.url);if(e=t(u),n(e))return e}if(a=r.getHeader("Accept-Language"),!a)return v[0];a=a.replace(/\s*/g,"").toLowerCase();for(var l,i,s=a.split(","),c=s.length,f=-1;++f<c;)if(i=s[f],l=i.indexOf(";"),e=-1===l?i:i.substring(0,l),n(e))return e;return v[0]}}();var h;!function(r){function n(n){var e=r[n];return null==e&&console.error("<localization> Translation is not defined for",n),function(r){var n,t=null==e?r:e[r];return null==t&&(console.error("<localization> No translation for",r),t=r),1===arguments.length?t:(n=f.call(arguments),n[0]=t,c.apply(null,n))}}h=function(r){return null==e[r]?e[r]=n(r):e[r]};var e={}}(m),a.fromReq=function(r){if(r.localizer)return r.localizer;var n=x(r),e=h(n);return r.localizer=e};var y=p?a:t;if(null!=i){var b,q;!function(){function r(r,e){return r.apply(null,n(e))}function n(r){var n=r[0],e=r[1],t=r[2],a=r[3];switch(n.charCodeAt(0)){case 34:case 39:return evalStatements_(n,e,t,a)}var o=n.indexOf(",");return-1===o?n:(r=evalStatements_(n.substring(o+1),e,t,a),r.unshift(n.substring(0,o)),r)}b=function(){return y.fromReq(ctx.req)(key,model)},q=function(){return r(y,arguments)},i.Utils.Expression.evalStatements}(),i.registerUtil("L",p?b:q)}o(),n.$L=y});